<!doctype html>

<html lang="de" data-theme="light">
  <head>
    <meta charset="utf-8">

    <title>Location Based AR</title>

    <link rel="stylesheet" href="styles.css">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <script type='text/javascript' src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script type='text/javascript' src='/docs/assets/libs/ar-threex-location-only.js'></script>
    <script type='text/javascript' src="/docs/assets/libs/ar.js"></script>
    <script type='text/javascript' src="/docs/assets/libs/aframe-look-at-component.js"></script>
  </head>

  <body>
    <script>
      AFRAME.registerComponent('cursor-listener', {
        init: function() {
          var data = this.data;
          var el = this.el;

          el.addEventListener('click', function(evt) {
            el.nextElementSibling.classList.add('open');
          });
        }
      });

      AFRAME.registerComponent('user-camera', {
        init: function() {
          var data = this.data;
          var el = this.el;
          console.log('camera');

          el.addEventListener('gps-camera-update-positon', function(evt) {
            console.log('pos update');
          });
        }
      });

      

    </script>

    <h1>Web AR Anwendung für den ÖPNV</h1>

    <div class="button__wrapper">
      <button type="button" class="button button-tutorial">Anleitung</button>

      <div class="button-toggle-wrapper">
        <div>
          <input class="darkmode-toggle" type="checkbox" name="darkmode" id="darkmode">
          <label for="darkmode">Dark Mode</label>
        </div>
      </div>
    </div>

    <div class="debug-info">
      <div class="location-information">
        <div>Accuracy: 0</div>
        <div>Position: 0 0</div>
      </div>
      <!--
      <div>
        <label for="inputLng">Longitude:</label>
        <input id="inputLng" type="text">
        <br>
        <label for="inputLat">Lattitude:</label>
        <input id="inputLat" type="text">

        <button class="updatePosButton">Aktualisieren</button>
      </div>-->
    </div>

    <div class="overlay overlay--tutorial">
      <div class="overlay__header">
        <h2>Anleitung für die Anwendung</h2>

        <button type="button" class="overlay__header-close-button">
          <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"/></svg>
        </button>
      </div>

      <div class="overlay__content swiper">
        <div class="tutorial-slider swiper-wrapper">
          <div class="slide-item swiper-slide">
            <div class="slide-item__headline">
              <h3>Vorraussetzungen</h3>
              <div>Schritt 1</div>
            </div>

            <ol>
              <li>
                Vor der Nutzung der Anwendung, stelle sicher, dass du dein Standort aktiviert hast. Ebenso benötigen wir die Berechtigung für dein Standort und deine Kamera, damit die Anwendung funktioniert.

                <div class="tutorial-slider__permission-location">
                  <div class="icon">
                    <svg width="20" height="21" viewBox="0 0 20 21" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9.997 20.5049C15.515 20.5049 19.995 16.1128 19.995 10.703C19.995 5.29315 15.515 0.901978 9.997 0.901978C4.48 0.901978 0 5.29315 0 10.703C0 16.1128 4.48 20.5049 9.997 20.5049ZM9.997 19.0343C5.307 19.0343 1.5 15.301 1.5 10.703C1.5 6.10492 5.307 2.37257 9.997 2.37257C14.687 2.37257 18.495 6.10492 18.495 10.703C18.495 15.301 14.687 19.0343 9.997 19.0343ZM9.997 12.6618C9.583 12.6618 9.247 12.3324 9.247 11.9265V6.53433C9.247 6.12845 9.583 5.79904 9.997 5.79904C10.411 5.79904 10.747 6.12845 10.747 6.53433V11.9265C10.747 12.3324 10.411 12.6618 9.997 12.6618ZM9.995 15.603C10.547 15.603 10.995 15.1637 10.995 14.6226C10.995 14.0814 10.547 13.6422 9.995 13.6422C9.443 13.6422 8.995 14.0814 8.995 14.6226C8.995 15.1637 9.443 15.603 9.995 15.603Z"/>
                    </svg>
                    
                    <svg width="21" height="20" viewBox="0 0 21 20" xmlns="http://www.w3.org/2000/svg">
                      <path d="M10.4967 0.00500488C16.0137 0.00500488 20.4937 4.485 20.4937 10.002C20.4937 15.52 16.0137 20 10.4967 20C4.97866 20 0.498657 15.52 0.498657 10.002C0.498657 4.485 4.97866 0.00500488 10.4967 0.00500488ZM10.4967 1.505C5.80666 1.505 1.99866 5.312 1.99866 10.002C1.99866 14.692 5.80666 18.5 10.4967 18.5C15.1867 18.5 18.9937 14.692 18.9937 10.002C18.9937 5.312 15.1867 1.505 10.4967 1.505ZM5.44766 10.391L9.29866 13.821C9.44066 13.949 9.61966 14.011 9.79766 14.011C9.99966 14.011 10.2027 13.93 10.3497 13.769L16.3027 7.26C16.4337 7.117 16.4987 6.93701 16.4987 6.75801C16.4987 6.34801 16.1677 6.011 15.7507 6.011C15.5467 6.011 15.3457 6.093 15.1967 6.254L9.74366 12.216L6.44566 9.278C6.30166 9.151 6.12466 9.08801 5.94666 9.08801C5.53166 9.08801 5.19866 9.423 5.19866 9.834C5.19866 10.039 5.28266 10.243 5.44766 10.391Z"/>
                    </svg>
                  </div>         
                  <span>Berechtigung für Standort wird benötigt</span>
                </div>
                <div class="tutorial-slider__permission-camera">
                  <div class="icon">
                    <svg width="20" height="21" viewBox="0 0 20 21" xmlns="http://www.w3.org/2000/svg">
                      <path d="M9.997 20.5049C15.515 20.5049 19.995 16.1128 19.995 10.703C19.995 5.29315 15.515 0.901978 9.997 0.901978C4.48 0.901978 0 5.29315 0 10.703C0 16.1128 4.48 20.5049 9.997 20.5049ZM9.997 19.0343C5.307 19.0343 1.5 15.301 1.5 10.703C1.5 6.10492 5.307 2.37257 9.997 2.37257C14.687 2.37257 18.495 6.10492 18.495 10.703C18.495 15.301 14.687 19.0343 9.997 19.0343ZM9.997 12.6618C9.583 12.6618 9.247 12.3324 9.247 11.9265V6.53433C9.247 6.12845 9.583 5.79904 9.997 5.79904C10.411 5.79904 10.747 6.12845 10.747 6.53433V11.9265C10.747 12.3324 10.411 12.6618 9.997 12.6618ZM9.995 15.603C10.547 15.603 10.995 15.1637 10.995 14.6226C10.995 14.0814 10.547 13.6422 9.995 13.6422C9.443 13.6422 8.995 14.0814 8.995 14.6226C8.995 15.1637 9.443 15.603 9.995 15.603Z"/>
                    </svg>
                    
                    <svg width="21" height="20" viewBox="0 0 21 20" xmlns="http://www.w3.org/2000/svg">
                      <path d="M10.4967 0.00500488C16.0137 0.00500488 20.4937 4.485 20.4937 10.002C20.4937 15.52 16.0137 20 10.4967 20C4.97866 20 0.498657 15.52 0.498657 10.002C0.498657 4.485 4.97866 0.00500488 10.4967 0.00500488ZM10.4967 1.505C5.80666 1.505 1.99866 5.312 1.99866 10.002C1.99866 14.692 5.80666 18.5 10.4967 18.5C15.1867 18.5 18.9937 14.692 18.9937 10.002C18.9937 5.312 15.1867 1.505 10.4967 1.505ZM5.44766 10.391L9.29866 13.821C9.44066 13.949 9.61966 14.011 9.79766 14.011C9.99966 14.011 10.2027 13.93 10.3497 13.769L16.3027 7.26C16.4337 7.117 16.4987 6.93701 16.4987 6.75801C16.4987 6.34801 16.1677 6.011 15.7507 6.011C15.5467 6.011 15.3457 6.093 15.1967 6.254L9.74366 12.216L6.44566 9.278C6.30166 9.151 6.12466 9.08801 5.94666 9.08801C5.53166 9.08801 5.19866 9.423 5.19866 9.834C5.19866 10.039 5.28266 10.243 5.44766 10.391Z"/>
                    </svg>
                  </div>
                  <span>Berechtigung für Kamera wird benötigt</span>
                </div>
              </li>
            </ol>
          </div>

          <div class="slide-item swiper-slide">
            <div class="slide-item__headline">
              <h3>Übersicht Startseite</h3>
              <div>Schritt 2</div>
            </div>

            <ol>
              <li>
                Um Informationen über Haltestellen in deiner Nähe anzuzeigen, richte die Kamera deines Gerätes auf die Haltestelle.
              </li>
              <li>
                Die Anwendung erkennt Haltestellen in deiner Nähe und zeigt dir eine digitale Informationsbox an mit folgenden Informationen an:
                <img src="docs/assets/images/tutorial_help.png" width="710px" height="350px">
              </li>
            </ol>
          </div>

          <div class="slide-item swiper-slide">
            <div class="slide-item__headline">
              <h3>Wechseln zur Detailseite</h3>
              <div>Schritt 3</div>
            </div>

            <ol>
              <li>
                Hast du auf der Startseite eine Haltestelle anvisiert, sollte die dazugehörige Informationsbox erscheinen. Um nähere Informationen über die Haltestelle zu erfahren, tippe einfach auf die Box auf deinem Bildschirm.
              </li>
              <li>
                Nun öffnet sich die Detailseite mit ausführlichen Informationen über die Haltestelle. Darunter findest du die langfahrenden Linien, die nächsten fünf Abfahrten und die aktuellen Umleitungen.
              </li>
              <li>
                Um zurück zur Startseite zu kommen, schließe die Detailansicht über das Kreuz oben rechts.
              </li>
            </ol>
          </div>

          <div class="slide-item swiper-slide">
            <div class="slide-item__headline">
              <h3>Dark Mode</h3>
              <div>Schritt 4</div>
            </div>

            <ol>
              <li>
                Für die Anwendung steht ein dunkles und helles Design zur Verfügung. Um das Design zu wechseln tippe einfach auf den Toggle-Button ganz oben rechts. Der Button sieht folgendermaßen aus:

                <div class="button-toggle-wrapper-dummy">
                  <div class="darkmode-label-dummy" for="darkmode">Dark Mode</div>
                </div>
              </li>
              <li>
                Um in das vorherige Design zu wechseln, muss der Button einfach erneut getippt werden.
              </li>
            </ol>
          </div>
        </div>

        <!-- If we need navigation buttons -->
        <div class="slider-control-wrapper">
          <div class="tutorial-slider-button swiper-button-prev">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 0c-6.623 0-12 5.377-12 12s5.377 12 12 12 12-5.377 12-12-5.377-12-12-12zm0 1c-6.071 0-11 4.929-11 11s4.929 11 11 11 11-4.929 11-11-4.929-11-11-11zm4.828 11.5l-4.608 3.763.679.737 6.101-5-6.112-5-.666.753 4.604 3.747h-11.826v1h11.828z"/></svg>  
          </div>

          <div class="tutorial-slider__position">Schritt <span class="index">1</span> von <span class="number-of-slides">1</span></div>

          <div class="tutorial-slider-button swiper-button-next">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M12 0c-6.623 0-12 5.377-12 12s5.377 12 12 12 12-5.377 12-12-5.377-12-12-12zm0 1c-6.071 0-11 4.929-11 11s4.929 11 11 11 11-4.929 11-11-4.929-11-11-11zm4.828 11.5l-4.608 3.763.679.737 6.101-5-6.112-5-.666.753 4.604 3.747h-11.826v1h11.828z"/></svg>          
          </div>
        </div>
      </div>
    </div>

    <a-scene 
      vr-mode-ui='enabled: false' 
      arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false' 
      renderer='antialias: true; '
      gesture-detector
      id="scene">

      <a-camera 
        user-camera
        gps-new-camera='
          smoothingFactor: 0.9;'
        far="500"
      ></a-camera>

    </a-scene>


    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script src="/docs/assets/js/webar.js"></script>
  </body>
</html>
