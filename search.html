<!doctype html>

<html lang="de" data-theme="light">
  <head>
    <meta charset="utf-8">

    <title>Location Based AR</title>

    <link rel="stylesheet" href="search-styles.css">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <script type='text/javascript' src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script type='text/javascript' src='/docs/assets/libs/ar-threex-location-only.js'></script>
    <script type='text/javascript' src="/docs/assets/libs/ar.js"></script>
    <script type='text/javascript' src="/docs/assets/libs/aframe-look-at-component.js"></script>
  </head>

  <body>
    <script>
      AFRAME.registerComponent('cursor-listener', {
        init: function() {
          var data = this.data;
          var el = this.el;

          el.addEventListener('click', function(evt) {
            el.nextElementSibling.classList.add('open');
          });
        }
      });

      AFRAME.registerComponent('user-camera', {
        init: function() {
          var data = this.data;
          var el = this.el;
          console.log('camera');
        }
      });
    </script>

    <h1>Web AR Haltestellensuche</h1>

    <!--<div class="debug-info">
      <div class="location-information">
        <div>Accuracy: 0</div>
        <div>Position: 0 0</div>
      </div>
      
      <div>
        <label for="inputLng">Longitude:</label>
        <input id="inputLng" type="text">
        <br>
        <label for="inputLat">Lattitude:</label>
        <input id="inputLat" type="text">

        <button class="updatePosButton">Aktualisieren</button>
      </div>
    </div>-->

    <div class="stop-information-box">
        <button class="stop-information-box__header">
            <div>
                <h2>Pirnaischer Platz Steig 1</h2>
                <div>Du bist x m entfernt</div>
            </div>

            <svg width="22" height="12" viewBox="0 0 22 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path  fill="none" d="M1 1L11 11L21 1" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>

        <div class="stop-information-box__content hide">
            <ul class="stop-information-box__departures">
                <li>
                    <div>1 Leutewitz</div>
                    <div>jetzt</div>
                </li>
                <li>
                    <div>4 Radebeul</div>
                    <div>2 min</div>
                </li>
                <li>
                    <div>2 Gorbitz</div>
                    <div>5 min</div>
                </li>
            </ul>

            <div class="button__wrapper">
                <button class="button detail-button" type="button">mehr Details</button>
            </div>
        </div>
    </div>

    <div class="search-button__wrapper">
        <a href="http://localhost:8190/location.html" class="button search-button">Suche beenden</a>
    </div>

    <a-scene 
      vr-mode-ui='enabled: false' 
      arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false' 
      renderer='antialias: true; '
      gesture-detector
      id="scene">

      <a-camera 
        user-camera
        gps-new-camera='
          gpsMinDistance: 5'
        far="500"
        look-controls-enabled='false'
        arjs-device-orientation-controls='smoothingFactor: 0.1'
      ></a-camera>

      <a-sphere position="0 0 0" color="#CC4747" radius="0.5"></a-sphere>

    </a-scene>

    <div class="overlay">
        <div class="overlay__header">
          <h2>Pirnaischer Platz</h2>
          <div class="overlay__header-platform">Steig 1</div>
  
          <button type="button" class="overlay__header-close-button">
            <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 10.93 5.719-5.72c.146-.146.339-.219.531-.219.404 0 .75.324.75.749 0 .193-.073.385-.219.532l-5.72 5.719 5.719 5.719c.147.147.22.339.22.531 0 .427-.349.75-.75.75-.192 0-.385-.073-.531-.219l-5.719-5.719-5.719 5.719c-.146.146-.339.219-.531.219-.401 0-.75-.323-.75-.75 0-.192.073-.384.22-.531l5.719-5.719-5.72-5.719c-.146-.147-.219-.339-.219-.532 0-.425.346-.749.75-.749.192 0 .385.073.531.219z"/></svg>
          </button>
        </div>
  
        <div class="overlay__content">
          <div class="overlay__content-lines">
            <h3>Linien</h3>
            <ul class="overlay__content-lines-wrapper">
              <li>1</li>
              <li>2</li>
              <li>4</li>
            </ul>
          </div>
  
          <div class="overlay__content-departures">
            <div class="overlay_content-depatures-header">
              <h3>Abfahrten</h3>
              <div class="live-hint">
                Live
                <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4.53225 12.622L3.42075 13.7507C1.3275 12.1 0 9.691 0 7C0 4.309 1.3275 1.9 3.42075 0.25L4.53225 1.378C2.78775 2.75425 1.67925 4.762 1.67925 7C1.67925 9.238 2.78775 11.2458 4.53225 12.622ZM5.0385 7C5.0385 5.65675 5.70375 4.45225 6.75 3.6265L5.63925 2.5C4.24425 3.60025 3.35925 5.206 3.35925 7C3.35925 8.794 4.24425 10.3997 5.63925 11.5L6.75 10.3735C5.703 9.54775 5.0385 8.34325 5.0385 7ZM16.3207 7C16.3207 4.762 15.2123 2.75425 13.4678 1.378L14.5792 0.25C16.6725 1.9 18 4.309 18 7C18 9.691 16.6725 12.1 14.5792 13.7507L13.4678 12.622C15.2123 11.2458 16.3207 9.238 16.3207 7ZM11.25 10.3735L12.3608 11.5C13.7558 10.3997 14.6407 8.794 14.6407 7C14.6407 5.206 13.7558 3.60025 12.3608 2.5L11.25 3.6265C12.297 4.45225 12.9615 5.65675 12.9615 7C12.9615 8.34325 12.297 9.54775 11.25 10.3735ZM9 4.75C7.758 4.75 6.75 5.75725 6.75 7C6.75 8.24275 7.758 9.25 9 9.25C10.242 9.25 11.25 8.24275 11.25 7C11.25 5.75725 10.242 4.75 9 4.75Z" fill="white"/>
                </svg>  
              </div>
            </div>
  
            <ul class="overlay__content-departures-wrapper">
              <li>
                <div class="overlay__content-departures-info">
                  <span>1 Leutewitz</span>
                  <span>jetzt</span>
                </div>
                <div class="overlay__content-departures-detail-info">10.45 Uhr <span class="highlight--green">pünktlich</span></div>
              </li>
  
              <li>
                <div class="overlay__content-departures-info">
                  <span>4 Radebeul West</span>
                  <span>2 min</span>
                </div>
                <div class="overlay__content-departures-detail-info">10.47 Uhr <span class="highlight--green">pünktlich</span></div>
              </li>
  
              <li>
                <div class="overlay__content-departures-info">
                  <span>2 Gorbitz</span>
                  <span>5 min</span>
                </div>
                <div class="overlay__content-departures-detail-info">10.49 Uhr <span class="highlight--red">+ 1 min</span></div>
              </li>
  
              <li>
                <div class="overlay__content-departures-info">
                  <span>1 Leutewitz</span>
                  <span>12 min</span>
                </div>
                <div class="overlay__content-departures-detail-info">10.55 Uhr <span class="highlight--red">+ 2 min</span></div>
              </li>
  
              <li>
                <div class="overlay__content-departures-info">
                  <span>4 Radebeul West</span>
                  <span>12 min</span>
                </div>
                <div class="overlay__content-departures-detail-info">10.57 Uhr <span class="highlight--green">pünktlich</span></div>
              </li>
            </ul>
          </div>
  
          <div class="overlay__content-detour">
            <h3>Aktuelle Umleitungen</h3>
            <ul class="overlay__content-detour-wrapper">
              <li>
                <button class="overlay__content-detour-header">
                  <div>
                    <div class="overlay__content-detour-line">4</div>
                    <div class="overlay__content-detour-type">verkürzte Linienführung</div>
                  </div>
  
                  <svg width="22" height="12" viewBox="0 0 22 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path  fill="none" d="M1 1L11 11L21 1" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
  
                <div class="overlay__content-detour-content hide">
                  <div>Verkürzte Strecke: Laubegast -Postplatz - Mickten - Forststraße - Radebeul Ost.</div>
                  <div>Ersatzbusverkehr EV4: Forststraße - Radebeul West - Weinböhla</div>
                </div>
              </li>
              <li>
                <button class="overlay__content-detour-header">
                  <div>
                    <div class="overlay__content-detour-line">2</div>
                    <div class="overlay__content-detour-type">verkürzte Linienführung</div>
                  </div>
  
                  <svg width="22" height="12" viewBox="0 0 22 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill="none" d="M1 1L11 11L21 1" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="overlay__content-detour-content hide">
                  <div>Verkürzte Strecke: Laubegast -Postplatz - Mickten - Forststraße - Radebeul Ost.</div>
                  <div>Ersatzbusverkehr EV4: Forststraße - Radebeul West - Weinböhla</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <script src="/docs/assets/js/search.js"></script>
  </body>
</html>
